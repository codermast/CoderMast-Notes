import{u as _,f as te,g as ae,h as U,i as se,P as re,t as ie,j as le,k as A,l as H,m as ne,n as Y,p as a,q as oe,R as B,s as ce,v as de,x as ue,C as me,y as pe,z as he,A as ve,B as ye,D as ge,E as R,F as be,G as ke,H as qe,I,J as T,K as fe}from"./app-BLUmwQj7.js";const je=["/","/about/","/database/","/dev-idea/","/dev-tools/homebrew.html","/dev-tools/","/front-end/","/java/","/project/","/resource-sharing/e-books.html","/resource-sharing/","/spring-series/","/about/author/","/about/journey/","/computer/cn/","/computer/cn/cn-tcp-3-4.html","/computer/co/","/computer/ds/complexity.html","/computer/ds/data-structure-concept.html","/computer/ds/linear-list.html","/computer/ds/","/computer/os/","/database/mysql/constraint.html","/database/mysql/dividing-databases-tables.html","/database/mysql/function-base.html","/database/mysql/innodb-engine.html","/database/mysql/innodb-mvcc.html","/database/mysql/master-slave-replication.html","/database/mysql/multi-table-query.html","/database/mysql/mysql-base.html","/database/mysql/mysql-index.html","/database/mysql/mysql-lock.html","/database/mysql/mysql-log.html","/database/mysql/mysql-manage.html","/database/mysql/mysql-trigger.html","/database/mysql/mysql-view.html","/database/mysql/read-write-separation.html","/database/mysql/","/database/mysql/sql-general-syntax.html","/database/mysql/sql-optimize.html","/database/mysql/sql-perfomance-analysis.html","/database/mysql/storage-engine.html","/database/mysql/store-procedure.html","/database/mysql/transaction.html","/database/redis/","/dev-idea/design-patterns/","/dev-tools/docker/docker-basic.html","/dev-tools/docker/docker-compose.html","/dev-tools/docker/docker-container-connection.html","/dev-tools/docker/docker-dockerfile.html","/dev-tools/docker/docker-helloworld.html","/dev-tools/docker/docker-install.html","/dev-tools/docker/docker-introduce.html","/dev-tools/docker/docker-object.html","/dev-tools/docker/docker-warehouse.html","/dev-tools/docker/docker-web-containers.html","/dev-tools/docker/","/dev-tools/git/git-basic-operations.html","/dev-tools/git/git-branch-manage.html","/dev-tools/git/git-content-operations.html","/dev-tools/git/git-introduce-install.html","/dev-tools/git/git-remote-manage.html","/dev-tools/git/git-workspace-index-repo.html","/dev-tools/git/","/dev-tools/idea/","/dev-tools/idea/shortcuts.html","/dev-tools/maven/introduce-install-config.html","/dev-tools/maven/","/front-end/vue3/basic-knowledge.html","/front-end/vue3/component-communication.html","/front-end/vue3/computed.html","/front-end/vue3/create-vue-project.html","/front-end/vue3/life-cycle.html","/front-end/vue3/other-api.html","/front-end/vue3/pinia.html","/front-end/vue3/","/front-end/vue3/router.html","/front-end/vue3/template-grammar.html","/front-end/vue3/vue3-new-component.html","/front-end/vue3/watch.html","/java/collection/list-arraylist.html","/java/collection/list-linkedlist.html","/java/collection/list-stack.html","/java/collection/list-vectore.html","/java/collection/map-hashmap.html","/java/collection/map-linkedhashmap.html","/java/collection/map-treemap.html","/java/collection/queue-deque.html","/java/collection/queue-queue.html","/java/collection/","/java/collection/set-hashset.html","/java/collection/set-linkedhashset.html","/java/collection/set-treeset.html","/java/core/annotation.html","/java/core/basic-grammar.html","/java/core/class-and-object.html","/java/core/exception.html","/java/core/generics.html","/java/core/jdk-env-path.html","/java/core/","/java/core/reflection.html","/java/io/file.html","/java/io/io-stream-system.html","/java/io/","/java/jvm/redemd.html","/java/thread/","/project/sky-take-out/BackEnd-Dev-Build.html","/project/sky-take-out/Database-Dev-Build.html","/project/sky-take-out/FrontEnd-Dev-Build.html","/project/sky-take-out/","/spring-series/spring/annotations-beans.html","/spring-series/spring/implement-ioc.html","/spring-series/spring/introduction-case.html","/spring-series/spring/","/spring-series/spring/spring-aop.html","/spring-series/spring/spring-aot.html","/spring-series/spring/spring-data-validation.html","/spring-series/spring/spring-i18n.html","/spring-series/spring/spring-ioc.html","/spring-series/spring/spring-junit.html","/spring-series/spring/spring-resources.html","/spring-series/spring/spring-summarize.html","/spring-series/spring/spring-transaction.html","/spring-series/spring/xml-beans.html","/spring-series/springboot/","/spring-series/springmvc/","/computer/cn/application-layer/","/computer/cn/cn-architecture/","/computer/cn/cn-architecture/cn-classification.html","/computer/cn/cn-architecture/cn-notion-composition-function.html","/computer/cn/data-link-layer/","/computer/cn/netwark-layer/","/computer/cn/physical-layer/","/computer/cn/transaction-layer/","/database/redis/advance/","/database/redis/advance/redis-advance-batch-optimization.html","/database/redis/advance/redis-advance-cache-issues.html","/database/redis/advance/redis-advance-cache-synchronization.html","/database/redis/advance/redis-advance-cluster-best-practices.html","/database/redis/advance/redis-advance-jvm-process-cache.html","/database/redis/advance/redis-advance-key-value-design.html","/database/redis/advance/redis-advance-lua-language.html","/database/redis/advance/redis-advance-master-slave.html","/database/redis/advance/redis-advance-multi-level-cache.html","/database/redis/advance/redis-advance-persistence.html","/database/redis/advance/redis-advance-sentinel.html","/database/redis/advance/redis-advance-server-optimization.html","/database/redis/advance/redis-advance-sharded-cluster.html","/database/redis/client/","/database/redis/client/redis-client-jedis-connection-pool.html","/database/redis/client/redis-client-jedis-quick-start.html","/database/redis/client/redis-client-redistemplate-redis-serializer.html","/database/redis/client/redis-client-spring-data-redis.html","/database/redis/introduce/","/database/redis/introduce/redis-introduction-base-commind.html","/database/redis/introduce/redis-introduction-concept-fundamental.html","/database/redis/introduce/redis-introduction-five-base-datatype.html","/database/redis/introduce/redis-introduction-pub-sub.html","/database/redis/introduce/redis-introduction-scription.html","/database/redis/introduce/redis-introduction-stream.html","/database/redis/introduce/redis-introduction-three-special-datatype.html","/database/redis/introduce/redis-introduction-transaction.html","/database/redis/principle/","/database/redis/principle/redis-principle-IO.html","/database/redis/principle/redis-principle-base-datatype-implement.html","/database/redis/principle/redis-principle-communication-protocol.html","/database/redis/principle/redis-principle-datastruct-underlying-implementation.html","/database/redis/principle/redis-principle-memery-strategy.html","/database/redis/principle/redis-principle-netword-model.html","/database/redis/principle/redis-principle-redisobject.html","/dev-idea/design-patterns/behaiver-patterns/observer-pattern.html","/dev-idea/design-patterns/behaiver-patterns/","/dev-idea/design-patterns/create-patterns/factory-pattern.html","/dev-idea/design-patterns/create-patterns/","/dev-idea/design-patterns/create-patterns/singleton-pattern.html","/dev-idea/design-patterns/structural-patterns/adapter-pattern.html","/dev-idea/design-patterns/structural-patterns/","/404.html","/computer/","/java/jvm/"],we="SEARCH_PRO_QUERY_HISTORY",g=_(we,[]),He=()=>{const{queryHistoryCount:s}=R,r=s>0;return{enabled:r,queryHistory:g,addQueryHistory:i=>{r&&(g.value=Array.from(new Set([i,...g.value.slice(0,s-1)])))},removeQueryHistory:i=>{g.value=[...g.value.slice(0,i),...g.value.slice(i+1)]}}},F=s=>je[s.id]+("anchor"in s?`#${s.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,b=_(Re,[]),xe=()=>{const s=$>0;return{enabled:s,resultHistory:b,addResultHistory:r=>{if(s){const i={link:F(r),display:r.display};"header"in r&&(i.header=r.header),b.value=[i,...b.value.slice(0,$-1)]}},removeResultHistory:r=>{b.value=[...b.value.slice(0,r),...b.value.slice(r+1)]}}},Qe=s=>{const r=me(),i=U(),x=pe(),n=A(0),f=H(()=>n.value>0),h=he([]);return ve(()=>{const{search:v,terminate:Q}=ye(),k=ge(d=>{const q=d.join(" "),{searchFilter:D=p=>p,splitWord:S,suggestionsFilter:z,...y}=r.value;q?(n.value+=1,v(d.join(" "),i.value,y).then(p=>D(p,q,i.value,x.value)).then(p=>{n.value-=1,h.value=p}).catch(p=>{console.warn(p),n.value-=1,n.value||(h.value=[])})):h.value=[]},R.searchDelay-R.suggestDelay);Y([s,i],([d])=>k(d),{immediate:!0}),be(()=>{Q()})}),{isSearching:f,results:h}};var Se=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:r}){const i=ae(),x=U(),n=se(re),{enabled:f,addQueryHistory:h,queryHistory:v,removeQueryHistory:Q}=He(),{enabled:k,resultHistory:d,addResultHistory:q,removeResultHistory:D}=xe(),S=f||k,z=ie(s,"queries"),{results:y,isSearching:p}=Qe(z),l=le({isQuery:!0,index:0}),u=A(0),m=A(0),O=H(()=>S&&(v.value.length>0||d.value.length>0)),C=H(()=>y.value.length>0),E=H(()=>y.value[u.value]||null),M=()=>{const{isQuery:e,index:t}=l;t===0?(l.isQuery=!e,l.index=e?d.value.length-1:v.value.length-1):l.index=t-1},G=()=>{const{isQuery:e,index:t}=l;t===(e?v.value.length-1:d.value.length-1)?(l.isQuery=!e,l.index=0):l.index=t+1},J=()=>{u.value=u.value>0?u.value-1:y.value.length-1,m.value=E.value.contents.length-1},K=()=>{u.value=u.value<y.value.length-1?u.value+1:0,m.value=0},V=()=>{m.value<E.value.contents.length-1?m.value+=1:K()},N=()=>{m.value>0?m.value-=1:J()},L=e=>e.map(t=>fe(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ke[e.index]||"$content",[o,w=""]=qe(t)?t[x.value].split("$content"):t.split("$content");return e.display.map(c=>a("div",L([o,...c,w])))}return e.display.map(t=>a("div",L(t)))},j=()=>{u.value=0,m.value=0,r("updateQuery",""),r("close")},X=()=>f?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.queryHistory),v.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:l.isQuery&&l.index===t}],onClick:()=>{r("updateQuery",e)}},[a(I,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),Q(t)}})]))])):null,Z=()=>k?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.resultHistory),d.value.map((e,t)=>a(B,{to:e.link,class:["search-pro-result-item",{active:!l.isQuery&&l.index===t}],onClick:()=>{j()}},()=>[a(I,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(o=>L(o)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),D(t)}})]))])):null;return ne("keydown",e=>{if(s.isFocusing){if(C.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=E.value.contents[m.value];h(s.queries.join(" ")),q(t),i.push(F(t)),j()}}else if(k){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=l;l.isQuery?(r("updateQuery",v.value[t]),e.preventDefault()):(i.push(d.value[t].link),j())}}}}),Y([u,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!C.value:!O.value}],id:"search-pro-results"},s.queries.length?p.value?a(oe,{hint:n.value.searching}):C.value?a("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:t},o)=>{const w=u.value===o;return a("li",{class:["search-pro-result-list-item",{active:w}]},[a("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((c,ee)=>{const P=w&&m.value===ee;return a(B,{to:F(c),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{h(s.queries.join(" ")),q(c),j()}},()=>[c.type==="text"?null:a(c.type==="title"?ce:c.type==="heading"?de:ue,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?a("div",{class:"content-header"},c.header):null,a("div",W(c))])])})])})):n.value.emptyResult:S?O.value?[X(),Z()]:n.value.emptyHistory:n.value.emptyResult)}});export{Se as default};
